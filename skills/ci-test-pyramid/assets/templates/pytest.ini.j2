# pytest configuration
# Generated by ci-test-pyramid skill

[pytest]
# Test directories
testpaths = tests

# Strict marker validation - prevents typos
addopts =
    --strict-markers
    -v
    --tb=short
    --durations=10

# Test pyramid markers
markers =
    unit: Unit tests - fast, isolated, no external dependencies
    integration: Integration tests - test component interactions
    e2e: End-to-end tests - full system tests
    smoke: Smoke tests - quick sanity checks
    slow: Slow tests - may take longer than 1 second
    performance: Performance tests - benchmark and load tests
{% if config.test_pyramid.get('additional_markers') %}
{% for marker in config.test_pyramid.additional_markers %}
    {{ marker.name }}: {{ marker.description }}
{% endfor %}
{% endif %}

# Async configuration
asyncio_mode = auto

# Timeout for long-running tests (seconds)
timeout = 120

# Coverage configuration (if using pytest-cov)
# Uncomment to enable coverage collection
# addopts = --cov={{ project.name | default('src') }} --cov-report=xml --cov-report=html

# Minimum coverage threshold
# addopts = --cov-fail-under=80

# JUnit XML output for CI
junit_family = xunit2
